import{c as I,r as R,a3 as q,a4 as D,o as w,g as T,h as $,b as N,aK as _,ac as k,e as K,aD as O,p as Q,aL as z,aM as j,w as G,a as d,O as P,C as p,I as f,U as L,L as M,G as U}from"./index-CpW3-iVN.js";import{u as H,a as J,b as W,k as X,c as A}from"./use-slider-DaIPPoS_.js";import{R as Y}from"./index-Rq3Ye2ad.js";const me=I({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:v,emit:m}){const n=T(),o=R(null);let r=0;const s=[];function i(a){const c=typeof a=="boolean"?a:e.noErrorFocus!==!0,b=++r,x=(t,l)=>{m(`validation${t===!0?"Success":"Error"}`,l)},S=t=>{const l=t.validate();return typeof l.then=="function"?l.then(u=>({valid:u,comp:t}),u=>({valid:!1,comp:t,err:u})):Promise.resolve({valid:l,comp:t})};return(e.greedy===!0?Promise.all(s.map(S)).then(t=>t.filter(l=>l.valid!==!0)):s.reduce((t,l)=>t.then(()=>S(l).then(u=>{if(u.valid===!1)return Promise.reject(u)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return b===r&&x(!0),!0;if(b===r){const{comp:l,err:u}=t[0];if(u!==void 0&&console.error(u),x(!1,l),c===!0){const B=t.find(({comp:F})=>typeof F.focus=="function"&&_(F.$)===!1);B!==void 0&&B.comp.focus()}}return!1})}function y(){r++,s.forEach(a=>{typeof a.resetValidation=="function"&&a.resetValidation()})}function V(a){a!==void 0&&k(a);const c=r+1;i().then(b=>{c===r&&b===!0&&(e.onSubmit!==void 0?m("submit",a):a?.target!==void 0&&typeof a.target.submit=="function"&&a.target.submit())})}function h(a){a!==void 0&&k(a),m("reset"),K(()=>{y(),e.autofocus===!0&&e.noResetFocus!==!0&&g()})}function g(){O(()=>{if(o.value===null)return;(o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),c=>c.tabIndex!==-1))?.focus({preventScroll:!0})})}Q(z,{bindComponent(a){s.push(a)},unbindComponent(a){const c=s.indexOf(a);c!==-1&&s.splice(c,1)}});let C=!1;return q(()=>{C=!0}),D(()=>{C===!0&&e.autofocus===!0&&g()}),w(()=>{e.autofocus===!0&&g()}),Object.assign(n.proxy,{validate:i,resetValidation:y,submit:V,reset:h,focus:g,getValidationComponents:()=>s}),()=>$("form",{class:"q-form",ref:o,onSubmit:V,onReset:h},N(v.default))}}),Z=()=>({}),ee=I({name:"QSlider",props:{...J,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:H,setup(e,{emit:v}){const{proxy:{$q:m}}=T(),{state:n,methods:o}=W({updateValue:c,updatePosition:x,getDragging:b,formAttrs:j(e)}),r=R(null),s=R(0),i=R(0);function y(){i.value=e.modelValue===null?n.innerMin.value:A(e.modelValue,n.innerMin.value,n.innerMax.value)}G(()=>`${e.modelValue}|${n.innerMin.value}|${n.innerMax.value}`,y),y();const V=d(()=>o.convertModelToRatio(i.value)),h=d(()=>n.active.value===!0?s.value:V.value),g=d(()=>{const t={[n.positionProp.value]:`${100*n.innerMinRatio.value}%`,[n.sizeProp.value]:`${100*(h.value-n.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(t.backgroundImage=`url(${e.selectionImg}) !important`),t}),C=o.getThumbRenderFn({focusValue:!0,getNodeData:Z,ratio:h,label:d(()=>e.labelValue!==void 0?e.labelValue:i.value),thumbColor:d(()=>e.thumbColor||e.color),labelColor:d(()=>e.labelColor),labelTextColor:d(()=>e.labelTextColor)}),a=d(()=>n.editable.value!==!0?{}:m.platform.is.mobile===!0?{onClick:o.onMobileClick}:{onMousedown:o.onActivate,onFocus:S,onBlur:o.onBlur,onKeydown:E,onKeyup:o.onKeyup});function c(t){i.value!==e.modelValue&&v("update:modelValue",i.value),t===!0&&v("change",i.value)}function b(){return r.value.getBoundingClientRect()}function x(t,l=n.dragging.value){const u=o.getDraggingRatio(t,l);i.value=o.convertRatioToModel(u),s.value=e.snap!==!0||e.step===0?u:o.convertModelToRatio(i.value)}function S(){n.focus.value=!0}function E(t){if(X.includes(t.keyCode)===!1)return;k(t);const l=([34,33].includes(t.keyCode)?10:1)*n.keyStep.value,u=([34,37,40].includes(t.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*l;i.value=A(n.roundValueFn.value(i.value+u),n.innerMin.value,n.innerMax.value),c()}return()=>{const t=o.getContent(g,n.tabindex,a,l=>{l.push(C())});return $("div",{ref:r,class:n.classes.value+(e.modelValue===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":e.modelValue},t)}}}),te={class:"rating-slider-component"},oe={class:"slider-header"},ne=["src","alt"],ae={class:"slider-info"},le={class:"slider-label"},re={class:"slider-description"},ue={class:"slider-value"},ie={class:"value-number"},se={class:"slider-container"},ve={__name:"RatingSlider",props:{modelValue:{type:Number,default:0},label:{type:String,required:!0},icon:{type:String,default:null}},emits:["update:modelValue"],setup(e){const v=e,m=d(()=>Object.values(Y).find(r=>r.label===v.label)?.sliderDescription||"Bewerte diese Eigenschaft von 0-5"),n=o=>o===0?"grey-4":o<=1?"green-1":o<=2?"green-2":o<=3?"green-3":o<=4?"green-4":o<=5?"green-5":"green-6";return(o,r)=>(p(),P("div",te,[f("div",oe,[e.icon?(p(),P("img",{key:0,src:e.icon,alt:e.label,class:"slider-icon"},null,8,ne)):L("",!0),f("div",ae,[f("div",le,M(e.label),1),f("div",re,M(m.value),1)]),f("div",ue,[f("span",ie,M(e.modelValue),1),r[1]||(r[1]=f("span",{class:"value-max"},"/5",-1))])]),f("div",se,[U(ee,{"model-value":e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=s=>o.$emit("update:modelValue",s)),min:0,max:5,step:1,snap:"",color:n(e.modelValue),"track-size":"8px","thumb-size":"24px",class:"modern-slider",markers:"","label-never":""},null,8,["model-value","color"])])]))}};export{me as Q,ve as _};
