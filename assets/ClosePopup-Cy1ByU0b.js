import{c as oe,an as T,am as ae,s as ne,ap as se,g as ie,r as k,a as m,ar as re,as as le,at as ue,au as ce,av as de,w as C,d as x,aO as _,aR as q,t as fe,h as H,ai as he,b as ve,ac as me,aN as pe,ag as ge,aY as ye,aZ as Te}from"./index-DCcCDLBa.js";import{v as be,a as L,e as Pe,p as D,b as Se,c as we,d as Oe,r as A,s as Ee}from"./position-engine-vJON2Ukh.js";import{c as M}from"./selection-BO4drQm1.js";const _e=oe({name:"QTooltip",inheritAttrs:!1,props:{...Pe,...se,...T,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...T.transitionShow,default:"jump-down"},transitionHide:{...T.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:L},self:{type:String,default:"top middle",validator:L},offset:{type:Array,default:()=>[14,14],validator:be},scrollTarget:ne,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ae],setup(e,{slots:o,emit:a,attrs:i}){let r,u;const p=ie(),{proxy:{$q:n}}=p,c=k(null),h=k(!1),j=m(()=>D(e.anchor,n.lang.rtl)),K=m(()=>D(e.self,n.lang.rtl)),Q=m(()=>e.persistent!==!0),{registerTick:R,removeTick:W}=re(),{registerTimeout:v}=le(),{transitionProps:B,transitionStyle:I}=ue(e),{localScrollTarget:b,changeScrollEvent:U,unconfigureScrollTarget:V}=Se(e,O),{anchorEl:s,canShow:Y,anchorEvents:d}=we({showing:h,configureAnchorEl:X}),{show:Z,hide:g}=ce({showing:h,canShow:Y,handleShow:z,handleHide:F,hideOnRouteChange:Q,processOnMount:!0});Object.assign(d,{delayShow:G,delayHide:J});const{showPortal:P,hidePortal:S,renderPortal:$}=de(p,c,te,"tooltip");if(n.platform.is.mobile===!0){const t={anchorEl:s,innerRef:c,onClickOutside(l){return g(l),l.target.classList.contains("q-dialog__backdrop")&&me(l),!0}},y=m(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);C(y,l=>{(l===!0?Oe:A)(t)}),x(()=>{A(t)})}function z(t){P(),R(()=>{u=new MutationObserver(()=>f()),u.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),f(),O()}),r===void 0&&(r=C(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,f)),v(()=>{P(!0),a("show",t)},e.transitionDuration)}function F(t){W(),S(),w(),v(()=>{S(!0),a("hide",t)},e.transitionDuration)}function w(){u!==void 0&&(u.disconnect(),u=void 0),r!==void 0&&(r(),r=void 0),V(),_(d,"tooltipTemp")}function f(){Ee({targetEl:c.value,offset:e.offset,anchorEl:s.value,anchorOrigin:j.value,selfOrigin:K.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function G(t){if(n.platform.is.mobile===!0){M(),document.body.classList.add("non-selectable");const y=s.value,l=["touchmove","touchcancel","touchend","click"].map(E=>[y,E,"delayHide","passiveCapture"]);q(d,"tooltipTemp",l)}v(()=>{Z(t)},e.delay)}function J(t){n.platform.is.mobile===!0&&(_(d,"tooltipTemp"),M(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),v(()=>{g(t)},e.hideDelay)}function X(){if(e.noParentEvent===!0||s.value===null)return;const t=n.platform.is.mobile===!0?[[s.value,"touchstart","delayShow","passive"]]:[[s.value,"mouseenter","delayShow","passive"],[s.value,"mouseleave","delayHide","passive"]];q(d,"anchor",t)}function O(){if(s.value!==null||e.scrollTarget!==void 0){b.value=fe(s.value,e.scrollTarget);const t=e.noParentEvent===!0?f:g;U(b.value,t)}}function ee(){return h.value===!0?H("div",{...i,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",i.class],style:[i.style,I.value],role:"tooltip"},ve(o.default)):null}function te(){return H(he,B.value,ee)}return x(w),Object.assign(p.proxy,{updatePosition:f}),$}});function N(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const qe=pe({name:"close-popup",beforeMount(e,{value:o}){const a={depth:N(o),handler(i){a.depth!==0&&setTimeout(()=>{const r=ye(e);r!==void 0&&Te(r,i,a.depth)})},handlerKey(i){ge(i,13)===!0&&a.handler(i)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:o,oldValue:a}){o!==a&&(e.__qclosepopup.depth=N(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});export{qe as C,_e as Q};
