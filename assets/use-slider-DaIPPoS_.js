import{aN as Oe,aO as j,aP as M,aQ as Y,n as Re,aR as z,az as A,ab as ie,af as U,aS as Xe,ac as je,a5 as Ye,ao as Ue,g as Ke,aq as He,r as F,a as l,aT as We,aU as K,d as Qe,h as C,aV as Ge,aW as Je}from"./index-CpW3-iVN.js";import{c as Ve}from"./selection-Ba8Ytq5U.js";function N(n,r,o){return o<=r?r:Math.min(o,Math.max(r,n))}function it(n,r,o){if(o<=r)return r;const m=o-r+1;let e=r+(n-r)%m;return e<r&&(e=m+e),e===0?0:e}const W={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ze=Object.keys(W);W.all=!0;function ue(n){const r={};for(const o of Ze)n[o]===!0&&(r[o]=!0);return Object.keys(r).length===0?W:(r.horizontal===!0?r.left=r.right=!0:r.left===!0&&r.right===!0&&(r.horizontal=!0),r.vertical===!0?r.up=r.down=!0:r.up===!0&&r.down===!0&&(r.vertical=!0),r.horizontal===!0&&r.vertical===!0&&(r.all=!0),r)}const et=["INPUT","TEXTAREA"];function ce(n,r){return r.event===void 0&&n.target!==void 0&&n.target.draggable!==!0&&typeof r.handler=="function"&&et.includes(n.target.nodeName.toUpperCase())===!1&&(n.qClonedBy===void 0||n.qClonedBy.indexOf(r.uid)===-1)}function H(n,r,o){const m=A(n);let e,a=m.left-r.event.x,i=m.top-r.event.y,v=Math.abs(a),f=Math.abs(i);const u=r.direction;u.horizontal===!0&&u.vertical!==!0?e=a<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?e=i<0?"up":"down":u.up===!0&&i<0?(e="up",v>f&&(u.left===!0&&a<0?e="left":u.right===!0&&a>0&&(e="right"))):u.down===!0&&i>0?(e="down",v>f&&(u.left===!0&&a<0?e="left":u.right===!0&&a>0&&(e="right"))):u.left===!0&&a<0?(e="left",v<f&&(u.up===!0&&i<0?e="up":u.down===!0&&i>0&&(e="down"))):u.right===!0&&a>0&&(e="right",v<f&&(u.up===!0&&i<0?e="up":u.down===!0&&i>0&&(e="down")));let y=!1;if(e===void 0&&o===!1){if(r.event.isFirst===!0||r.event.lastDir===void 0)return{};e=r.event.lastDir,y=!0,e==="left"||e==="right"?(m.left-=a,v=0,a=0):(m.top-=i,f=0,i=0)}return{synthetic:y,payload:{evt:n,touch:r.event.mouse!==!0,mouse:r.event.mouse===!0,position:m,direction:e,isFirst:r.event.isFirst,isFinal:o===!0,duration:Date.now()-r.event.time,distance:{x:v,y:f},offset:{x:a,y:i},delta:{x:m.left-r.event.lastX,y:m.top-r.event.lastY}}}}let tt=0;const rt=Oe({name:"touch-pan",beforeMount(n,{value:r,modifiers:o}){if(o.mouse!==!0&&M.has.touch!==!0)return;function m(a,i){o.mouse===!0&&i===!0?je(a):(o.stop===!0&&U(a),o.prevent===!0&&ie(a))}const e={uid:"qvtp_"+tt++,handler:r,modifiers:o,direction:ue(o),noop:Re,mouseStart(a){ce(a,e)&&Xe(a)&&(z(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(a,!0))},touchStart(a){if(ce(a,e)){const i=a.target;z(e,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),e.start(a)}},start(a,i){if(M.is.firefox===!0&&Y(n,!0),e.lastEvt=a,i===!0||o.stop===!0){if(e.direction.all!==!0&&(i!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const u=a.type.indexOf("mouse")!==-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&ie(u),a.cancelBubble===!0&&U(u),Object.assign(u,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[e.uid]:a.qClonedBy.concat(e.uid)}),e.initialEvent={target:a.target,event:u}}U(a)}const{left:v,top:f}=A(a);e.event={x:v,y:f,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:v,lastY:f}},move(a){if(e.event===void 0)return;const i=A(a),v=i.left-e.event.x,f=i.top-e.event.y;if(v===0&&f===0)return;e.lastEvt=a;const u=e.event.mouse===!0,y=()=>{m(a,u);let k;o.preserveCursor!==!0&&o.preservecursor!==!0&&(k=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ve(),e.styleCleanup=h=>{if(e.styleCleanup=void 0,k!==void 0&&(document.documentElement.style.cursor=k),document.body.classList.remove("non-selectable"),u===!0){const w=()=>{document.body.classList.remove("no-pointer-events--children")};h!==void 0?setTimeout(()=>{w(),h()},50):w()}else h!==void 0&&h()}};if(e.event.detected===!0){e.event.isFirst!==!0&&m(a,e.event.mouse);const{payload:k,synthetic:h}=H(a,e,!1);k!==void 0&&(e.handler(k)===!1?e.end(a):(e.styleCleanup===void 0&&e.event.isFirst===!0&&y(),e.event.lastX=k.position.left,e.event.lastY=k.position.top,e.event.lastDir=h===!0?void 0:k.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||u===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){y(),e.event.detected=!0,e.move(a);return}const g=Math.abs(v),b=Math.abs(f);g!==b&&(e.direction.horizontal===!0&&g>b||e.direction.vertical===!0&&g<b||e.direction.up===!0&&g<b&&f<0||e.direction.down===!0&&g<b&&f>0||e.direction.left===!0&&g>b&&v<0||e.direction.right===!0&&g>b&&v>0?(e.event.detected=!0,e.move(a)):e.end(a,!0))},end(a,i){if(e.event!==void 0){if(j(e,"temp"),M.is.firefox===!0&&Y(n,!1),i===!0)e.styleCleanup?.(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(H(a===void 0?e.lastEvt:a,e).payload);const{payload:v}=H(a===void 0?e.lastEvt:a,e,!0),f=()=>{e.handler(v)};e.styleCleanup!==void 0?e.styleCleanup(f):f()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(n.__qtouchpan=e,o.mouse===!0){const a=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";z(e,"main",[[n,"mousedown","mouseStart",`passive${a}`]])}M.has.touch===!0&&z(e,"main",[[n,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[n,"touchmove","noop","notPassiveCapture"]])},updated(n,r){const o=n.__qtouchpan;o!==void 0&&(r.oldValue!==r.value&&(typeof value!="function"&&o.end(),o.handler=r.value),o.direction=ue(r.modifiers))},beforeUnmount(n){const r=n.__qtouchpan;r!==void 0&&(r.event!==void 0&&r.end(),j(r,"main"),j(r,"temp"),M.is.firefox===!0&&Y(n,!1),r.styleCleanup?.(),delete n.__qtouchpan)}}),de="q-slider__marker-labels",at=n=>({value:n}),nt=({marker:n})=>C("div",{key:n.value,style:n.style,class:n.classes},n.label),lt=[34,37,40,33,39,38],ut={...Ue,...Ye,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:n=>n>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ct=["pan","update:modelValue","change"];function dt({updateValue:n,updatePosition:r,getDragging:o,formAttrs:m}){const{props:e,emit:a,slots:i,proxy:{$q:v}}=Ke(),f=He(e,v),u=Ge(m),y=F(!1),g=F(!1),b=F(!1),k=F(!1),h=l(()=>e.vertical===!0?"--v":"--h"),w=l(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),q=l(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(v.lang.rtl===!0)),x=l(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),$=l(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),L=l(()=>e.disable!==!0&&e.readonly!==!0&&x.value<$.value),Q=l(()=>{if(e.step===0)return s=>s;const t=(String(e.step).trim().split(".")[1]||"").length;return s=>parseFloat(s.toFixed(t))}),G=l(()=>e.step===0?1:e.step),ve=l(()=>L.value===!0?e.tabindex||0:-1),_=l(()=>e.max-e.min),J=l(()=>$.value-x.value),E=l(()=>I(x.value)),D=l(()=>I($.value)),B=l(()=>e.vertical===!0?q.value===!0?"bottom":"top":q.value===!0?"right":"left"),V=l(()=>e.vertical===!0?"height":"width"),fe=l(()=>e.vertical===!0?"width":"height"),Z=l(()=>e.vertical===!0?"vertical":"horizontal"),pe=l(()=>{const t={role:"slider","aria-valuemin":x.value,"aria-valuemax":$.value,"aria-orientation":Z.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),me=l(()=>`q-slider q-slider${h.value} q-slider--${y.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(L.value===!0?" q-slider--editable":""))+(b.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(f.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+h.value:""));function T(t){const s="q-slider__"+t;return`${s} ${s}${h.value} ${s}${h.value}${w.value}`}function ee(t){const s="q-slider__"+t;return`${s} ${s}${h.value}`}const be=l(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),he=l(()=>ee("markers")+" absolute overflow-hidden"),ke=l(()=>ee("track-container")),Ce=l(()=>T("pin")),ye=l(()=>T("label")),ge=l(()=>T("text-container")),Se=l(()=>T("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),xe=l(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),qe=l(()=>{const t={[fe.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),$e=l(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),te=l(()=>{const t=D.value-E.value,s={[B.value]:`${100*E.value}%`,[V.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(s.backgroundImage=`url(${e.innerTrackImg}) !important`),s});function Me(t){const{min:s,max:c,step:d}=e;let p=s+t*(c-s);if(d>0){const S=(p-x.value)%d;p+=(Math.abs(S)>=d/2?(S<0?-1:1)*d:0)-S}return p=Q.value(p),N(p,x.value,$.value)}function I(t){return _.value===0?0:(t-e.min)/_.value}function we(t,s){const c=A(t),d=e.vertical===!0?N((c.top-s.top)/s.height,0,1):N((c.left-s.left)/s.width,0,1);return N(q.value===!0?1-d:d,E.value,D.value)}const re=l(()=>We(e.markers)===!0?e.markers:G.value),ae=l(()=>{const t=[],s=re.value,c=e.max;let d=e.min;do t.push(d),d+=s;while(d<c);return t.push(c),t}),ne=l(()=>{const t=` ${de}${h.value}-`;return de+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${q.value===!0?"rtl":"ltr"}`}),P=l(()=>e.markerLabels===!1?null:_e(e.markerLabels).map((t,s)=>({index:s,value:t.value,label:t.label||t.value,classes:ne.value+(t.classes!==void 0?" "+t.classes:""),style:{...se(t.value),...t.style||{}}}))),le=l(()=>({markerList:P.value,markerMap:Ee.value,classes:ne.value,getStyle:se})),Le=l(()=>{const t=J.value===0?"2px":100*re.value/J.value;return{...te.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function _e(t){if(t===!1)return null;if(t===!0)return ae.value.map(at);if(typeof t=="function")return ae.value.map(c=>{const d=t(c);return K(d)===!0?{...d,value:c}:{value:c,label:d}});const s=({value:c})=>c>=e.min&&c<=e.max;return Array.isArray(t)===!0?t.map(c=>K(c)===!0?c:{value:c}).filter(s):Object.keys(t).map(c=>{const d=t[c],p=Number(c);return K(d)===!0?{...d,value:p}:{value:p,label:d}}).filter(s)}function se(t){return{[B.value]:`${100*(t-e.min)/_.value}%`}}const Ee=l(()=>{if(e.markerLabels===!1)return null;const t={};return P.value.forEach(s=>{t[s.value]=s}),t});function Be(){if(i["marker-label-group"]!==void 0)return i["marker-label-group"](le.value);const t=i["marker-label"]||nt;return P.value.map(s=>t({marker:s,...le.value}))}const Te=l(()=>[[rt,ze,void 0,{[Z.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ze(t){t.isFinal===!0?(k.value!==void 0&&(r(t.evt),t.touch===!0&&n(!0),k.value=void 0,a("pan","end")),y.value=!1,b.value=!1):t.isFirst===!0?(k.value=o(t.evt),r(t.evt),n(),y.value=!0,a("pan","start")):(r(t.evt),n())}function oe(){b.value=!1}function Fe(t){r(t,o(t)),n(),g.value=!0,y.value=!0,document.addEventListener("mouseup",O,!0)}function O(){g.value=!1,y.value=!1,n(!0),oe(),document.removeEventListener("mouseup",O,!0)}function Ne(t){r(t,o(t)),n(!0)}function Ae(t){lt.includes(t.keyCode)&&n(!0)}function De(t){if(e.vertical===!0)return null;const s=v.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*s-1} * ${e.thumbSize} / 2 + ${50-100*s}%))`}}function Ie(t){const s=l(()=>g.value===!1&&(b.value===t.focusValue||b.value==="both")?" q-slider--focus":""),c=l(()=>`q-slider__thumb q-slider__thumb${h.value} q-slider__thumb${h.value}-${q.value===!0?"rtl":"ltr"} absolute non-selectable`+s.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),d=l(()=>({width:e.thumbSize,height:e.thumbSize,[B.value]:`${100*t.ratio.value}%`,zIndex:b.value===t.focusValue?2:void 0})),p=l(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),S=l(()=>De(t.ratio.value)),R=l(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const X=[C("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[C("path",{d:e.thumbPath})]),C("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(X.push(C("div",{class:Ce.value+" absolute fit no-pointer-events"+p.value},[C("div",{class:ye.value,style:{minWidth:e.thumbSize}},[C("div",{class:ge.value,style:S.value},[C("span",{class:R.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&u(X,"push")),C("div",{class:c.value,style:d.value,...t.getNodeData()},X)}}function Pe(t,s,c,d){const p=[];e.innerTrackColor!=="transparent"&&p.push(C("div",{key:"inner",class:$e.value,style:te.value})),e.selectionColor!=="transparent"&&p.push(C("div",{key:"selection",class:be.value,style:t.value})),e.markers!==!1&&p.push(C("div",{key:"marker",class:he.value,style:Le.value})),d(p);const S=[Je("div",{key:"trackC",class:ke.value,tabindex:s.value,...c.value},[C("div",{class:xe.value,style:qe.value},p)],"slide",L.value,()=>Te.value)];if(e.markerLabels!==!1){const R=e.switchMarkerLabelsSide===!0?"unshift":"push";S[R](C("div",{key:"markerL",class:Se.value},Be()))}return S}return Qe(()=>{document.removeEventListener("mouseup",O,!0)}),{state:{active:y,focus:b,preventFocus:g,dragging:k,editable:L,classes:me,tabindex:ve,attributes:pe,roundValueFn:Q,keyStep:G,trackLen:_,innerMin:x,innerMinRatio:E,innerMax:$,innerMaxRatio:D,positionProp:B,sizeProp:V,isReversed:q},methods:{onActivate:Fe,onMobileClick:Ne,onBlur:oe,onKeyup:Ae,getContent:Pe,getThumbRenderFn:Ie,convertRatioToModel:Me,convertModelToRatio:I,getDraggingRatio:we}}}export{ut as a,dt as b,N as c,lt as k,it as n,ct as u};
